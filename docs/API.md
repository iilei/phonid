<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# phonid

```go
import "github.com/iilei/phonid/pkg"
```

Package phonid generates phonetic identifiers using configurable patterns and bijective shuffling via Feistel networks.

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func IsValidPhonidRCFilename\(filename string\) bool](<#IsValidPhonidRCFilename>)
- [func LoadPhonidRC\(fp string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#LoadPhonidRC>)
- [func LoadPhonidRCLenient\(fp string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#LoadPhonidRCLenient>)
- [func ParsePhonidRC\(content string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#ParsePhonidRC>)
- [func ParsePhonidRCLenient\(content string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#ParsePhonidRCLenient>)
- [func ValidatePhonidRC\(config \*PhonidConfig\) error](<#ValidatePhonidRC>)
- [type Config](<#Config>)
  - [func NewConfig\(\) \(\*Config, error\)](<#NewConfig>)
  - [func NewConfigWithOptions\(opts ...ConfigOption\) \(\*Config, error\)](<#NewConfigWithOptions>)
  - [func \(c \*Config\) Validate\(\) error](<#Config.Validate>)
- [type ConfigOption](<#ConfigOption>)
  - [func WithExpectedBitWidth\(bitWidth int\) ConfigOption](<#WithExpectedBitWidth>)
  - [func WithPhonetic\(phonetic \*PhonidConfig\) ConfigOption](<#WithPhonetic>)
  - [func WithRounds\(rounds int\) ConfigOption](<#WithRounds>)
  - [func WithSeed\(seed uint64\) ConfigOption](<#WithSeed>)
  - [func WithShuffle\(shuffle \*ShuffleConfig\) ConfigOption](<#WithShuffle>)
- [type FeistelShuffler](<#FeistelShuffler>)
  - [func NewFeistelShuffler\(bitWidth, rounds int, seed uint64\) \(\*FeistelShuffler, error\)](<#NewFeistelShuffler>)
  - [func \(fs \*FeistelShuffler\) BitWidth\(\) int](<#FeistelShuffler.BitWidth>)
  - [func \(fs \*FeistelShuffler\) Decode\(encoded uint64\) \(uint64, error\)](<#FeistelShuffler.Decode>)
  - [func \(fs \*FeistelShuffler\) Encode\(input uint64\) \(uint64, error\)](<#FeistelShuffler.Encode>)
  - [func \(fs \*FeistelShuffler\) MaxValue\(\) uint64](<#FeistelShuffler.MaxValue>)
  - [func \(fs \*FeistelShuffler\) Rounds\(\) int](<#FeistelShuffler.Rounds>)
- [type PatternEncoder](<#PatternEncoder>)
  - [func \(e \*PatternEncoder\) Decode\(word string\) \(int, error\)](<#PatternEncoder.Decode>)
  - [func \(e \*PatternEncoder\) Encode\(number PositiveInt\) \(string, error\)](<#PatternEncoder.Encode>)
  - [func \(e \*PatternEncoder\) MaxValue\(\) int](<#PatternEncoder.MaxValue>)
- [type PhoneticEncoder](<#PhoneticEncoder>)
  - [func NewPhoneticEncoder\(config \*PhonidConfig\) \(\*PhoneticEncoder, error\)](<#NewPhoneticEncoder>)
  - [func NewPhoneticEncoderLenient\(config \*PhonidConfig\) \(\*PhoneticEncoder, error\)](<#NewPhoneticEncoderLenient>)
  - [func NewPhoneticEncoderWithPreflight\(config \*PhonidConfig, checks \[\]PreflightCheck\) \(\*PhoneticEncoder, error\)](<#NewPhoneticEncoderWithPreflight>)
  - [func \(e \*PhoneticEncoder\) Decode\(word string\) \(int, error\)](<#PhoneticEncoder.Decode>)
  - [func \(e \*PhoneticEncoder\) Encode\(number PositiveInt\) \(string, error\)](<#PhoneticEncoder.Encode>)
  - [func \(e \*PhoneticEncoder\) GetSmallestPatternCapacity\(\) int](<#PhoneticEncoder.GetSmallestPatternCapacity>)
  - [func \(p \*PhoneticEncoder\) ValidatePreflight\(checks \[\]PreflightCheck\) error](<#PhoneticEncoder.ValidatePreflight>)
- [type PhonidConfig](<#PhonidConfig>)
  - [func \(pc \*PhonidConfig\) Validate\(\) error](<#PhonidConfig.Validate>)
- [type PlaceholderMap](<#PlaceholderMap>)
- [type PlaceholderType](<#PlaceholderType>)
- [type Position](<#Position>)
- [type PositiveInt](<#PositiveInt>)
  - [func \(p PositiveInt\) Validate\(\) error](<#PositiveInt.Validate>)
- [type PreflightCheck](<#PreflightCheck>)
- [type RuneSet](<#RuneSet>)
  - [func \(rs \*RuneSet\) UnmarshalText\(text \[\]byte\) error](<#RuneSet.UnmarshalText>)
- [type ShuffleConfig](<#ShuffleConfig>)
  - [func \(sc \*ShuffleConfig\) Validate\(\) error](<#ShuffleConfig.Validate>)
- [type TOMLConfig](<#TOMLConfig>)
- [type TOMLPhonidConfig](<#TOMLPhonidConfig>)
- [type TOMLShuffleConfig](<#TOMLShuffleConfig>)


## Constants

<a name="RcFileName"></a>

```go
const (
    RcFileName      = ".phonidrc"
    RcFileOptSuffix = ".toml"
)
```

<a name="MaxBitWidth"></a>

```go
const (
    // MaxBitWidth is the maximum supported bit width (uint64 size).
    MaxBitWidth = 64
    // MinRounds is the minimum number of rounds to shuffle.
    MinRounds = 0
    // MaxRounds is the maximum number of rounds to shuffle.
    MaxRounds = 12
)
```

## Variables

<a name="AllowedVowels"></a>

```go
var (
    // AllowedVowels defines the permitted vowel characters.
    AllowedVowels = map[rune]bool{
        'a': true, 'e': true, 'i': true, 'o': true, 'u': true, 'y': true,
        'A': true, 'E': true, 'I': true, 'O': true, 'U': true, 'Y': true,
    }

    // AllowedPatternLengths defines the permitted pattern lengths.
    AllowedPatternLengths = []int{3, 5, 7, 11, 23}

    // AllowedPlaceholders defines the valid placeholder identifiers.
    AllowedPlaceholders = map[PlaceholderType]string{
        Consonant: "Consonant",
        Vowel:     "Vowel",
        Liquid:    "Liquid",
        Nasal:     "Nasal",
        Sibilant:  "Sibilant",
        Fricative: "Fricative",
        CustomX:   "User-defined category 1",
        CustomY:   "User-defined category 2",
        CustomZ:   "User-defined category 3",
    }
    ProQuintPlaceholders = PlaceholderMap{
        Vowel:     []rune("aiou"),
        Consonant: []rune("bdfghjklmnprstvz"),
        CustomX:   RuneSet{'-'},
    }

    // ProQuintConfig provides Proquint-compatible encoding
    // See: https://arxiv.org/html/0901.4016
    ProQuintConfig = PhonidConfig{
        Patterns:     []string{ProQuintPattern},
        Placeholders: ProQuintPlaceholders,
    }

    // ComplementPlaceholders lists all non-vowel phonetic categories.
    ComplementPlaceholders = []PlaceholderType{
        Consonant,
        Liquid,
        Nasal,
        Sibilant,
        Fricative,
    }

    // DefaultPlaceholders provides sensible defaults for common phonetic categories.
    DefaultPlaceholders = map[PlaceholderType]RuneSet{
        Consonant: RuneSet("bcdfghjkpqstvwxz"),
        Liquid:    RuneSet("lmnr"),
        Vowel:     RuneSet("aeiou"),
    }

    DefaultPatterns = []string{
        "CVC",
        "VCCVC",
        "CVCVCVC",
        "CVCVCVCVCVC",
    }
)
```

<a name="IsValidPhonidRCFilename"></a>
## func [IsValidPhonidRCFilename](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L213>)

```go
func IsValidPhonidRCFilename(filename string) bool
```

IsValidPhonidRCFilename checks if filename matches .phonidrc or .\<prefix\>.phonidrc pattern, optionally with a .toml extension.

<a name="LoadPhonidRC"></a>
## func [LoadPhonidRC](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L58>)

```go
func LoadPhonidRC(fp string) (*PhonidConfig, []PreflightCheck, error)
```

LoadPhonidRC loads and validates a PhonidConfig from a phonidrc file with strict preflight validation.

<a name="LoadPhonidRCLenient"></a>
## func [LoadPhonidRCLenient](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L69>)

```go
func LoadPhonidRCLenient(fp string) (*PhonidConfig, []PreflightCheck, error)
```

LoadPhonidRCLenient loads a PhonidConfig without requiring preflight checks Used exclusively by 'phonid preflight \-\-suggest' command.

<a name="ParsePhonidRC"></a>
## func [ParsePhonidRC](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L80>)

```go
func ParsePhonidRC(content string) (*PhonidConfig, []PreflightCheck, error)
```

ParsePhonidRC parses TOML content requiring preflight checks. Returns config and preflight checks for validation with NewPhoneticEncoderWithPreflight.

<a name="ParsePhonidRCLenient"></a>
## func [ParsePhonidRCLenient](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L86>)

```go
func ParsePhonidRCLenient(content string) (*PhonidConfig, []PreflightCheck, error)
```

ParsePhonidRCLenient parses TOML content without requiring preflight checks. Used exclusively by 'phonid preflight \-\-suggest' command.

<a name="ValidatePhonidRC"></a>
## func [ValidatePhonidRC](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L163>)

```go
func ValidatePhonidRC(config *PhonidConfig) error
```

ValidatePhonidRC validates a PhonidConfig loaded from RC file with base encoding.

<a name="Config"></a>
## type [Config](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L12-L22>)

Config holds the configuration for phonetic ID generation.

```go
type Config struct {
    // ID format settings
    Phonetic *PhonidConfig `default:"{}"`

    // Feistel shuffler settings
    Shuffle *ShuffleConfig `default:"{}"`

    // Optional: Expected BitWidth for preflight assertion
    // If set, Validate() will fail if calculated BitWidth doesn't match
    ExpectedBitWidth int
}
```

<a name="NewConfig"></a>
### func [NewConfig](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L30>)

```go
func NewConfig() (*Config, error)
```

NewConfig returns a Config with sensible defaults applied. BitWidth is auto\-calculated during Validate\(\) based on phonetic patterns.

<a name="NewConfigWithOptions"></a>
### func [NewConfigWithOptions](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L39>)

```go
func NewConfigWithOptions(opts ...ConfigOption) (*Config, error)
```

NewConfigWithOptions returns a Config with defaults, then applies the provided options.

<a name="Config.Validate"></a>
### func \(\*Config\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L57>)

```go
func (c *Config) Validate() error
```

Validate checks if the config values are valid and auto\-calculates BitWidth.

<a name="ConfigOption"></a>
## type [ConfigOption](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L25>)

ConfigOption is a functional option for configuring Config.

```go
type ConfigOption func(*Config)
```

<a name="WithExpectedBitWidth"></a>
### func [WithExpectedBitWidth](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L142>)

```go
func WithExpectedBitWidth(bitWidth int) ConfigOption
```

WithExpectedBitWidth sets the expected bit width for preflight assertion. If the calculated BitWidth doesn't match, Validate\(\) will fail. This helps catch breaking changes in phonetic configuration.

<a name="WithPhonetic"></a>
### func [WithPhonetic](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L133>)

```go
func WithPhonetic(phonetic *PhonidConfig) ConfigOption
```

WithPhonetic sets the phonetic configuration.

<a name="WithRounds"></a>
### func [WithRounds](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L106>)

```go
func WithRounds(rounds int) ConfigOption
```

WithRounds sets the number of Feistel rounds.

<a name="WithSeed"></a>
### func [WithSeed](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L116>)

```go
func WithSeed(seed uint64) ConfigOption
```

WithSeed sets the seed value.

<a name="WithShuffle"></a>
### func [WithShuffle](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L126>)

```go
func WithShuffle(shuffle *ShuffleConfig) ConfigOption
```

WithShuffle sets the shuffle configuration.

<a name="FeistelShuffler"></a>
## type [FeistelShuffler](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L28-L34>)

FeistelShuffler provides bijective integer shuffling using Feistel networks Supports configurable number space size and uses standard Go libraries.

```go
type FeistelShuffler struct {
    // contains filtered or unexported fields
}
```

<a name="NewFeistelShuffler"></a>
### func [NewFeistelShuffler](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L52>)

```go
func NewFeistelShuffler(bitWidth, rounds int, seed uint64) (*FeistelShuffler, error)
```

NewFeistelShuffler creates a new shuffler for the given bit width bitWidth: total bits \(8, 16, 32, 64, etc.\) rounds: number of Feistel rounds \(3\-6 recommended. "0" will preserve linear order\) seed: seed value for generating round keys

<a name="FeistelShuffler.BitWidth"></a>
### func \(\*FeistelShuffler\) [BitWidth](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L153>)

```go
func (fs *FeistelShuffler) BitWidth() int
```

BitWidth returns the configured bit width.

<a name="FeistelShuffler.Decode"></a>
### func \(\*FeistelShuffler\) [Decode](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L115>)

```go
func (fs *FeistelShuffler) Decode(encoded uint64) (uint64, error)
```

Decode performs bijective reverse shuffling \(inverse of Encode\).

<a name="FeistelShuffler.Encode"></a>
### func \(\*FeistelShuffler\) [Encode](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L85>)

```go
func (fs *FeistelShuffler) Encode(input uint64) (uint64, error)
```

Encode performs bijective shuffling of input value.

<a name="FeistelShuffler.MaxValue"></a>
### func \(\*FeistelShuffler\) [MaxValue](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L145>)

```go
func (fs *FeistelShuffler) MaxValue() uint64
```

MaxValue returns the maximum value that can be shuffled.

<a name="FeistelShuffler.Rounds"></a>
### func \(\*FeistelShuffler\) [Rounds](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L158>)

```go
func (fs *FeistelShuffler) Rounds() int
```

Rounds returns the number of Feistel rounds.

<a name="PatternEncoder"></a>
## type [PatternEncoder](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L18-L23>)

PatternEncoder represents a single pattern configuration.

```go
type PatternEncoder struct {
    // contains filtered or unexported fields
}
```

<a name="PatternEncoder.Decode"></a>
### func \(\*PatternEncoder\) [Decode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L214>)

```go
func (e *PatternEncoder) Decode(word string) (int, error)
```

Decode converts a phonetic word back to a number.

<a name="PatternEncoder.Encode"></a>
### func \(\*PatternEncoder\) [Encode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L191>)

```go
func (e *PatternEncoder) Encode(number PositiveInt) (string, error)
```

Encode converts a number to a phonetic word.

<a name="PatternEncoder.MaxValue"></a>
### func \(\*PatternEncoder\) [MaxValue](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L260>)

```go
func (e *PatternEncoder) MaxValue() int
```

MaxValue returns the maximum number that can be encoded.

<a name="PhoneticEncoder"></a>
## type [PhoneticEncoder](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L12-L15>)

PhoneticEncoder handles encoding/decoding between numbers and phonetic words.

```go
type PhoneticEncoder struct {
    // contains filtered or unexported fields
}
```

<a name="NewPhoneticEncoder"></a>
### func [NewPhoneticEncoder](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L34>)

```go
func NewPhoneticEncoder(config *PhonidConfig) (*PhoneticEncoder, error)
```

NewPhoneticEncoder creates an encoder with a validated config.

<a name="NewPhoneticEncoderLenient"></a>
### func [NewPhoneticEncoderLenient](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L61>)

```go
func NewPhoneticEncoderLenient(config *PhonidConfig) (*PhoneticEncoder, error)
```

NewPhoneticEncoderLenient creates an encoder with minimal validation. Used exclusively by 'phonid preflight \-\-suggest' command to allow generating suggestions even with incomplete configs.

<a name="NewPhoneticEncoderWithPreflight"></a>
### func [NewPhoneticEncoderWithPreflight](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L45>)

```go
func NewPhoneticEncoderWithPreflight(config *PhonidConfig, checks []PreflightCheck) (*PhoneticEncoder, error)
```

NewPhoneticEncoderWithPreflight creates an encoder and validates preflight checks. This is the standard way to create an encoder from a config file with preflight tests.

<a name="PhoneticEncoder.Decode"></a>
### func \(\*PhoneticEncoder\) [Decode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L177>)

```go
func (e *PhoneticEncoder) Decode(word string) (int, error)
```



<a name="PhoneticEncoder.Encode"></a>
### func \(\*PhoneticEncoder\) [Encode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L160>)

```go
func (e *PhoneticEncoder) Encode(number PositiveInt) (string, error)
```

Encode converts a number to a phonetic word, automatically selecting the best pattern.

<a name="PhoneticEncoder.GetSmallestPatternCapacity"></a>
### func \(\*PhoneticEncoder\) [GetSmallestPatternCapacity](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L266>)

```go
func (e *PhoneticEncoder) GetSmallestPatternCapacity() int
```

GetSmallestPatternCapacity returns the maximum value that can be encoded with the smallest \(first\) pattern. This is useful for generating preflight suggestions.

<a name="PhoneticEncoder.ValidatePreflight"></a>
### func \(\*PhoneticEncoder\) [ValidatePreflight](<https://github.com/iilei/phonid/blob/master/pkg/preflight.go#L10>)

```go
func (p *PhoneticEncoder) ValidatePreflight(checks []PreflightCheck) error
```

ValidatePreflight checks if preflight tests pass for this encoder Performs bidirectional validation: encoding \(int\-\>string\) and decoding \(string\-\>int\).

<a name="PhonidConfig"></a>
## type [PhonidConfig](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L120-L123>)

PhonidConfig holds phonetic pattern configuration.

Custom categories \(X, Y, Z\) can be used for domain\-specific sounds:

```
config := PhonidConfig{
    Patterns: []string{"CXVC"},  // Mix custom with built-in
    Placeholders: PlaceholderMap{
        Consonant: RuneSet("bcd"),
        Vowel: RuneSet("ae"),
        CustomX: RuneSet("Å‹"),  // Velar nasal
    },
}
```

```go
type PhonidConfig struct {
    Patterns     []string       // e.g., "CVCVC", "CLVCV", "VCCVL" // Each character becomes a placeholder key
    Placeholders PlaceholderMap // Maps placeholder to character set, e.g., {"C": "bcdfg", "V": "aeiou"}
}
```

<a name="PhonidConfig.Validate"></a>
### func \(\*PhonidConfig\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L133>)

```go
func (pc *PhonidConfig) Validate() error
```

Validate checks if the phonetic config is valid.

<a name="PlaceholderMap"></a>
## type [PlaceholderMap](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L102>)



```go
type PlaceholderMap map[PlaceholderType]RuneSet
```

<a name="PlaceholderType"></a>
## type [PlaceholderType](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L101>)



```go
type PlaceholderType rune
```

<a name="MinCharsForVowel"></a>

```go
const (
    // MinCharsForVowel placeholder type minimal set of runes.
    MinCharsForVowel = 2
    // MinCharsForComplement placeholder type minimal set of runes.
    MinCharsForComplement = 3 // At least one non-vowel category (C, L, N, S, or F) must have this many

    Consonant PlaceholderType = 'C'
    Vowel     PlaceholderType = 'V'
    Liquid    PlaceholderType = 'L'
    Nasal     PlaceholderType = 'N'
    Sibilant  PlaceholderType = 'S'
    Fricative PlaceholderType = 'F'
    CustomX   PlaceholderType = 'X'
    CustomY   PlaceholderType = 'Y'
    CustomZ   PlaceholderType = 'Z'

    // ProQuintPattern in accordance with ProQuint-compatible configuration
    // Based on the Proquint specification: https://arxiv.org/html/0901.4016
    // Provides a pre-configured encoder that generates identifiers compatible with
    // the original Proquint library, using the pattern CVCVC-CVCVC to encode 32-bit values.
    ProQuintPattern = "CVCVCXCVCVC"
)
```

<a name="Position"></a>
## type [Position](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L26-L30>)

Position represents one character position in the pattern.

```go
type Position struct {
    // contains filtered or unexported fields
}
```

<a name="PositiveInt"></a>
## type [PositiveInt](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L21>)

PositiveInt represents a non\-negative integer.

```go
type PositiveInt int
```

<a name="PositiveInt.Validate"></a>
### func \(PositiveInt\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L50>)

```go
func (p PositiveInt) Validate() error
```



<a name="PreflightCheck"></a>
## type [PreflightCheck](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L31-L34>)

PreflightCheck represents a single input\-\>output verification.

```go
type PreflightCheck struct {
    Input  PositiveInt `toml:"input"`
    Output string      `toml:"output"`
}
```

<a name="RuneSet"></a>
## type [RuneSet](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L106>)

RuneSet is a slice of runes that can be unmarshaled from a string. This allows TOML configs to use simple strings like C = "bcdfg" instead of arrays.

```go
type RuneSet []rune
```

<a name="RuneSet.UnmarshalText"></a>
### func \(\*RuneSet\) [UnmarshalText](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L127>)

```go
func (rs *RuneSet) UnmarshalText(text []byte) error
```

UnmarshalText implements encoding.TextUnmarshaler for TOML/JSON unmarshaling.

<a name="ShuffleConfig"></a>
## type [ShuffleConfig](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L20-L24>)

ShuffleConfig holds Feistel shuffler configuration.

```go
type ShuffleConfig struct {
    BitWidth int    `default:"0"` // 0 means auto-detect from phonetic patterns
    Rounds   int    `default:"0"`
    Seed     uint64 `default:"0"`
}
```

<a name="ShuffleConfig.Validate"></a>
### func \(\*ShuffleConfig\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L38>)

```go
func (sc *ShuffleConfig) Validate() error
```

Validate checks if the shuffle config is valid.

<a name="TOMLConfig"></a>
## type [TOMLConfig](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L23-L28>)

TOMLConfig represents the top\-level TOML structure.

```go
type TOMLConfig struct {
    Base      PositiveInt       `toml:"base,omitempty"`
    Shuffle   TOMLShuffleConfig `toml:"shuffle,omitempty"`
    Phonetic  TOMLPhonidConfig  `toml:"phonetic,omitempty"`
    Preflight []PreflightCheck  `toml:"preflight"` // Required - no omitempty
}
```

<a name="TOMLPhonidConfig"></a>
## type [TOMLPhonidConfig](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L44-L47>)

TOMLPhonidConfig represents the phonetic configuration.

```go
type TOMLPhonidConfig struct {
    Patterns     []string          `toml:"patterns,omitempty"`
    Placeholders map[string]string `toml:"placeholders,omitempty"`
}
```

<a name="TOMLShuffleConfig"></a>
## type [TOMLShuffleConfig](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L37-L41>)

TOMLShuffleConfig represents shuffle configuration.

```go
type TOMLShuffleConfig struct {
    BitWidth PositiveInt `toml:"bit_width,omitempty"`
    Rounds   PositiveInt `toml:"rounds,omitempty"`
    Seed     PositiveInt `toml:"seed,omitempty"`
}
```

# preflight

```go
import "github.com/iilei/phonid/pkg/preflight"
```

Package preflight represents preflight checks and code generation.

## Index

- [type Assertion](<#Assertion>)
- [type AssertionTable](<#AssertionTable>)
  - [func GenerateSuggestions\(encoder \*phonid.PhoneticEncoder\) \(AssertionTable, error\)](<#GenerateSuggestions>)
- [type Formatter](<#Formatter>)
  - [func NewTOMLFormatter\(\) Formatter](<#NewTOMLFormatter>)
- [type FormatterRegistry](<#FormatterRegistry>)
  - [func NewFormatterRegistry\(\) \*FormatterRegistry](<#NewFormatterRegistry>)
  - [func \(r \*FormatterRegistry\) AvailableFormats\(\) \[\]OutputFormat](<#FormatterRegistry.AvailableFormats>)
  - [func \(r \*FormatterRegistry\) Get\(format OutputFormat\) \(Formatter, error\)](<#FormatterRegistry.Get>)
  - [func \(r \*FormatterRegistry\) Register\(formatter Formatter\)](<#FormatterRegistry.Register>)
- [type OutputFormat](<#OutputFormat>)
- [type TOMLFormatter](<#TOMLFormatter>)
  - [func \(f \*TOMLFormatter\) Format\(w io.Writer, assertions \*AssertionTable\) error](<#TOMLFormatter.Format>)
  - [func \(f \*TOMLFormatter\) Name\(\) OutputFormat](<#TOMLFormatter.Name>)


<a name="Assertion"></a>
## type [Assertion](<https://github.com/iilei/phonid/blob/master/pkg/preflight/suggest.go#L12-L16>)

Assertion represents a single suggested preflight check.

```go
type Assertion struct {
    Input   phonid.PositiveInt
    Output  string
    Comment string // e.g., "Lower boundary", "Mid-range", etc.
}
```

<a name="AssertionTable"></a>
## type [AssertionTable](<https://github.com/iilei/phonid/blob/master/pkg/preflight/suggest.go#L18>)

AssertionTable represents a collection of preflight check assertions.

```go
type AssertionTable []Assertion
```

<a name="GenerateSuggestions"></a>
### func [GenerateSuggestions](<https://github.com/iilei/phonid/blob/master/pkg/preflight/suggest.go#L23>)

```go
func GenerateSuggestions(encoder *phonid.PhoneticEncoder) (AssertionTable, error)
```

GenerateSuggestions creates preflight check suggestions for an encoder. It generates boundary values and representative test points across the encoding space.

<a name="Formatter"></a>
## type [Formatter](<https://github.com/iilei/phonid/blob/master/pkg/preflight/formats.go#L19-L22>)

Formatter handles rendering suggestions in a specific format.

```go
type Formatter interface {
    Format(w io.Writer, suggestions *AssertionTable) error
    Name() OutputFormat
}
```

<a name="NewTOMLFormatter"></a>
### func [NewTOMLFormatter](<https://github.com/iilei/phonid/blob/master/pkg/preflight/tomlformat.go#L16>)

```go
func NewTOMLFormatter() Formatter
```

NewTOMLFormatter provides toml formatting.

<a name="FormatterRegistry"></a>
## type [FormatterRegistry](<https://github.com/iilei/phonid/blob/master/pkg/preflight/formats.go#L25-L27>)

FormatterRegistry manages available formatters.

```go
type FormatterRegistry struct {
    // contains filtered or unexported fields
}
```

<a name="NewFormatterRegistry"></a>
### func [NewFormatterRegistry](<https://github.com/iilei/phonid/blob/master/pkg/preflight/formats.go#L31>)

```go
func NewFormatterRegistry() *FormatterRegistry
```

NewFormatterRegistry creates a registry with all built\-in formatters.

<a name="FormatterRegistry.AvailableFormats"></a>
### func \(\*FormatterRegistry\) [AvailableFormats](<https://github.com/iilei/phonid/blob/master/pkg/preflight/formats.go#L54>)

```go
func (r *FormatterRegistry) AvailableFormats() []OutputFormat
```

AvailableFormats returns a list of all registered format names.

<a name="FormatterRegistry.Get"></a>
### func \(\*FormatterRegistry\) [Get](<https://github.com/iilei/phonid/blob/master/pkg/preflight/formats.go#L45>)

```go
func (r *FormatterRegistry) Get(format OutputFormat) (Formatter, error)
```

Get retrieves a formatter by name.

<a name="FormatterRegistry.Register"></a>
### func \(\*FormatterRegistry\) [Register](<https://github.com/iilei/phonid/blob/master/pkg/preflight/formats.go#L40>)

```go
func (r *FormatterRegistry) Register(formatter Formatter)
```

Register adds a formatter to the registry.

<a name="OutputFormat"></a>
## type [OutputFormat](<https://github.com/iilei/phonid/blob/master/pkg/preflight/formats.go#L16>)

OutputFormat represents a supported output format.

```go
type OutputFormat string
```

<a name="FormatTOML"></a>

```go
const (
    FormatTOML OutputFormat = "toml"
    FormatGo   OutputFormat = "go"
)
```

<a name="TOMLFormatter"></a>
## type [TOMLFormatter](<https://github.com/iilei/phonid/blob/master/pkg/preflight/tomlformat.go#L11-L13>)

TOMLFormatter implements the Formatter interface for TOML output.

```go
type TOMLFormatter struct {
    // contains filtered or unexported fields
}
```

<a name="TOMLFormatter.Format"></a>
### func \(\*TOMLFormatter\) [Format](<https://github.com/iilei/phonid/blob/master/pkg/preflight/tomlformat.go#L28>)

```go
func (f *TOMLFormatter) Format(w io.Writer, assertions *AssertionTable) error
```

Format writes preflight assertions as TOML to the writer.

<a name="TOMLFormatter.Name"></a>
### func \(\*TOMLFormatter\) [Name](<https://github.com/iilei/phonid/blob/master/pkg/preflight/tomlformat.go#L23>)

```go
func (f *TOMLFormatter) Name() OutputFormat
```

Name returns the format name.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
