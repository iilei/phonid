<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# phonid

```go
import "github.com/iilei/phonid/pkg"
```

## Index

- [Constants](<#constants>)
- [Variables](<#variables>)
- [func LoadPhonidRC\(filepath string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#LoadPhonidRC>)
- [func LoadPhonidRCLenient\(filepath string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#LoadPhonidRCLenient>)
- [func ParsePhonidRC\(content string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#ParsePhonidRC>)
- [func ParsePhonidRCLenient\(content string\) \(\*PhonidConfig, \[\]PreflightCheck, error\)](<#ParsePhonidRCLenient>)
- [func ValidatePhonidRC\(config \*PhonidConfig\) error](<#ValidatePhonidRC>)
- [type Config](<#Config>)
  - [func NewConfig\(\) \(\*Config, error\)](<#NewConfig>)
  - [func NewConfigWithOptions\(opts ...ConfigOption\) \(\*Config, error\)](<#NewConfigWithOptions>)
  - [func \(c \*Config\) Validate\(\) error](<#Config.Validate>)
- [type ConfigOption](<#ConfigOption>)
  - [func WithBitWidth\(bitWidth int\) ConfigOption](<#WithBitWidth>)
  - [func WithPhonetic\(phonetic \*PhonidConfig\) ConfigOption](<#WithPhonetic>)
  - [func WithRounds\(rounds int\) ConfigOption](<#WithRounds>)
  - [func WithSeed\(seed uint64\) ConfigOption](<#WithSeed>)
  - [func WithShuffle\(shuffle \*ShuffleConfig\) ConfigOption](<#WithShuffle>)
- [type FeistelShuffler](<#FeistelShuffler>)
  - [func NewFeistelShuffler\(bitWidth, rounds int, seed uint64\) \(\*FeistelShuffler, error\)](<#NewFeistelShuffler>)
  - [func \(fs \*FeistelShuffler\) BitWidth\(\) int](<#FeistelShuffler.BitWidth>)
  - [func \(fs \*FeistelShuffler\) Decode\(encoded uint64\) \(uint64, error\)](<#FeistelShuffler.Decode>)
  - [func \(fs \*FeistelShuffler\) Encode\(input uint64\) \(uint64, error\)](<#FeistelShuffler.Encode>)
  - [func \(fs \*FeistelShuffler\) MaxValue\(\) uint64](<#FeistelShuffler.MaxValue>)
  - [func \(fs \*FeistelShuffler\) Rounds\(\) int](<#FeistelShuffler.Rounds>)
- [type PatternEncoder](<#PatternEncoder>)
  - [func \(e \*PatternEncoder\) Decode\(word string\) \(int, error\)](<#PatternEncoder.Decode>)
  - [func \(e \*PatternEncoder\) Encode\(number PositiveInt\) \(string, error\)](<#PatternEncoder.Encode>)
  - [func \(e \*PatternEncoder\) MaxValue\(\) int](<#PatternEncoder.MaxValue>)
- [type PhoneticEncoder](<#PhoneticEncoder>)
  - [func NewPhoneticEncoder\(config \*PhonidConfig\) \(\*PhoneticEncoder, error\)](<#NewPhoneticEncoder>)
  - [func \(e \*PhoneticEncoder\) Decode\(word string\) \(int, error\)](<#PhoneticEncoder.Decode>)
  - [func \(e \*PhoneticEncoder\) Encode\(number PositiveInt\) \(string, error\)](<#PhoneticEncoder.Encode>)
  - [func \(p \*PhoneticEncoder\) ValidatePreflight\(checks \[\]PreflightCheck\) error](<#PhoneticEncoder.ValidatePreflight>)
- [type PhonidConfig](<#PhonidConfig>)
  - [func \(pc \*PhonidConfig\) Validate\(\) error](<#PhonidConfig.Validate>)
- [type PlaceholderMap](<#PlaceholderMap>)
- [type PlaceholderType](<#PlaceholderType>)
- [type Position](<#Position>)
- [type PositiveInt](<#PositiveInt>)
  - [func \(p PositiveInt\) Validate\(\) error](<#PositiveInt.Validate>)
- [type PreflightCheck](<#PreflightCheck>)
- [type RuneSet](<#RuneSet>)
  - [func \(rs \*RuneSet\) UnmarshalText\(text \[\]byte\) error](<#RuneSet.UnmarshalText>)
- [type ShuffleConfig](<#ShuffleConfig>)
  - [func \(sc \*ShuffleConfig\) Validate\(\) error](<#ShuffleConfig.Validate>)
- [type TOMLConfig](<#TOMLConfig>)
- [type TOMLPhonidConfig](<#TOMLPhonidConfig>)
- [type TOMLShuffleConfig](<#TOMLShuffleConfig>)


## Constants

<a name="MinCharsForVowel"></a>Minimum requirements per placeholder type

```go
const (
    MinCharsForVowel      = 2
    MinCharsForComplement = 3 // At least one non-vowel category (C, L, N, S, or F) must have this many
)
```

<a name="ProQuintPattern"></a>ProQuint\-compatible configuration Based on the Proquint specification: https://arxiv.org/html/0901.4016 Provides a pre\-configured encoder that generates identifiers compatible with the original Proquint library, using the pattern CVCVC\-CVCVC to encode 32\-bit values.

```go
const ProQuintPattern = "CVCVCXCVCVC"
```

## Variables

<a name="AllowedPatternLengths"></a>AllowedPatternLengths defines the permitted pattern lengths

```go
var AllowedPatternLengths = []int{3, 5, 7, 11, 23}
```

<a name="AllowedPlaceholders"></a>AllowedPlaceholders defines the valid placeholder identifiers

```go
var AllowedPlaceholders = map[PlaceholderType]string{
    Consonant: "Consonant",
    Vowel:     "Vowel",
    Liquid:    "Liquid",
    Nasal:     "Nasal",
    Sibilant:  "Sibilant",
    Fricative: "Fricative",
    CustomX:   "User-defined category 1",
    CustomY:   "User-defined category 2",
    CustomZ:   "User-defined category 3",
}
```

<a name="AllowedVowels"></a>AllowedVowels defines the permitted vowel characters

```go
var AllowedVowels = map[rune]bool{
    'a': true, 'e': true, 'i': true, 'o': true, 'u': true, 'y': true,
    'A': true, 'E': true, 'I': true, 'O': true, 'U': true, 'Y': true,
}
```

<a name="ComplementPlaceholders"></a>ComplementPlaceholders lists all non\-vowel phonetic categories

```go
var ComplementPlaceholders = []PlaceholderType{
    Consonant,
    Liquid,
    Nasal,
    Sibilant,
    Fricative,
}
```

<a name="DefaultPatterns"></a>

```go
var DefaultPatterns = []string{
    "CVC",
    "VCCVC",
    "CVCVCVC",
    "CVCVCVCVCVC",
}
```

<a name="DefaultPlaceholders"></a>DefaultPlaceholders provides sensible defaults for common phonetic categories

```go
var DefaultPlaceholders = map[PlaceholderType]RuneSet{
    Consonant: RuneSet("bcdfghjkpqstvwxz"),
    Liquid:    RuneSet("lmnr"),
    Vowel:     RuneSet("aeiou"),
}
```

<a name="ProQuintConfig"></a>ProQuintConfig provides Proquint\-compatible encoding See: https://arxiv.org/html/0901.4016

```go
var ProQuintConfig = PhonidConfig{
    Patterns:     []string{ProQuintPattern},
    Placeholders: ProQuintPlaceholders,
}
```

<a name="ProQuintPlaceholders"></a>

```go
var ProQuintPlaceholders = PlaceholderMap{
    Vowel:     RuneSet{'a', 'i', 'o', 'u'},
    Consonant: RuneSet{'b', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'r', 's', 't', 'v', 'z'},
    CustomX:   RuneSet{'-'},
}
```

<a name="LoadPhonidRC"></a>
## func [LoadPhonidRC](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L49>)

```go
func LoadPhonidRC(filepath string) (*PhonidConfig, []PreflightCheck, error)
```

LoadPhonidRC loads and validates a PhonidConfig from a phonidrc file with strict preflight validation

<a name="LoadPhonidRCLenient"></a>
## func [LoadPhonidRCLenient](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L60>)

```go
func LoadPhonidRCLenient(filepath string) (*PhonidConfig, []PreflightCheck, error)
```

LoadPhonidRCLenient loads a PhonidConfig without requiring preflight checks Used exclusively by 'phonid preflight \-\-suggest' command

<a name="ParsePhonidRC"></a>
## func [ParsePhonidRC](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L71>)

```go
func ParsePhonidRC(content string) (*PhonidConfig, []PreflightCheck, error)
```

ParsePhonidRCLenient parses TOML content requiring preflight checks Used exclusively by 'phonid preflight \-\-suggest' command

<a name="ParsePhonidRCLenient"></a>
## func [ParsePhonidRCLenient](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L77>)

```go
func ParsePhonidRCLenient(content string) (*PhonidConfig, []PreflightCheck, error)
```

ParsePhonidRCLenient parses TOML content without requiring preflight checks Used exclusively by 'phonid preflight \-\-suggest' command

<a name="ValidatePhonidRC"></a>
## func [ValidatePhonidRC](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L147>)

```go
func ValidatePhonidRC(config *PhonidConfig) error
```

ValidatePhonidRC validates a PhonidConfig loaded from RC file with base encoding

<a name="Config"></a>
## type [Config](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L10-L16>)

Config holds the configuration for phonetic ID generation

```go
type Config struct {
    // ID format settings
    Phonetic *PhonidConfig // nil = no phonetic encoding

    // Feistel shuffler settings
    Shuffle *ShuffleConfig `default:"{}"`
}
```

<a name="NewConfig"></a>
### func [NewConfig](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L19>)

```go
func NewConfig() (*Config, error)
```

NewConfig returns a Config with sensible defaults applied

<a name="NewConfigWithOptions"></a>
### func [NewConfigWithOptions](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L28>)

```go
func NewConfigWithOptions(opts ...ConfigOption) (*Config, error)
```

NewConfigWithOptions returns a Config with defaults, then applies the provided options

<a name="Config.Validate"></a>
### func \(\*Config\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L93>)

```go
func (c *Config) Validate() error
```

Validate checks if the config values are valid

<a name="ConfigOption"></a>
## type [ConfigOption](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L46>)

ConfigOption is a functional option for configuring Config

```go
type ConfigOption func(*Config)
```

<a name="WithBitWidth"></a>
### func [WithBitWidth](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L49>)

```go
func WithBitWidth(bitWidth int) ConfigOption
```

WithBitWidth sets the bit width

<a name="WithPhonetic"></a>
### func [WithPhonetic](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L86>)

```go
func WithPhonetic(phonetic *PhonidConfig) ConfigOption
```

WithPhonetic sets the phonetic configuration

<a name="WithRounds"></a>
### func [WithRounds](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L59>)

```go
func WithRounds(rounds int) ConfigOption
```

WithRounds sets the number of Feistel rounds

<a name="WithSeed"></a>
### func [WithSeed](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L69>)

```go
func WithSeed(seed uint64) ConfigOption
```

WithSeed sets the seed value

<a name="WithShuffle"></a>
### func [WithShuffle](<https://github.com/iilei/phonid/blob/master/pkg/config.go#L79>)

```go
func WithShuffle(shuffle *ShuffleConfig) ConfigOption
```

WithShuffle sets the shuffle configuration

<a name="FeistelShuffler"></a>
## type [FeistelShuffler](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L29-L35>)

FeistelShuffler provides bijective integer shuffling using Feistel networks Supports configurable number space size and uses standard Go libraries

```go
type FeistelShuffler struct {
    // contains filtered or unexported fields
}
```

<a name="NewFeistelShuffler"></a>
### func [NewFeistelShuffler](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L41>)

```go
func NewFeistelShuffler(bitWidth, rounds int, seed uint64) (*FeistelShuffler, error)
```

NewFeistelShuffler creates a new shuffler for the given bit width bitWidth: total bits \(8, 16, 32, 64, etc.\) rounds: number of Feistel rounds \(3\-6 recommended. "0" will preserve linear order\) seed: seed value for generating round keys

<a name="FeistelShuffler.BitWidth"></a>
### func \(\*FeistelShuffler\) [BitWidth](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L153>)

```go
func (fs *FeistelShuffler) BitWidth() int
```

BitWidth returns the configured bit width

<a name="FeistelShuffler.Decode"></a>
### func \(\*FeistelShuffler\) [Decode](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L103>)

```go
func (fs *FeistelShuffler) Decode(encoded uint64) (uint64, error)
```

Decode performs bijective reverse shuffling \(inverse of Encode\)

<a name="FeistelShuffler.Encode"></a>
### func \(\*FeistelShuffler\) [Encode](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L72>)

```go
func (fs *FeistelShuffler) Encode(input uint64) (uint64, error)
```

Encode performs bijective shuffling of input value

<a name="FeistelShuffler.MaxValue"></a>
### func \(\*FeistelShuffler\) [MaxValue](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L145>)

```go
func (fs *FeistelShuffler) MaxValue() uint64
```

MaxValue returns the maximum value that can be shuffled

<a name="FeistelShuffler.Rounds"></a>
### func \(\*FeistelShuffler\) [Rounds](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L158>)

```go
func (fs *FeistelShuffler) Rounds() int
```

Rounds returns the number of Feistel rounds

<a name="PatternEncoder"></a>
## type [PatternEncoder](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L15-L20>)

PatternEncoder represents a single pattern configuration

```go
type PatternEncoder struct {
    // contains filtered or unexported fields
}
```

<a name="PatternEncoder.Decode"></a>
### func \(\*PatternEncoder\) [Decode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L175>)

```go
func (e *PatternEncoder) Decode(word string) (int, error)
```

Decode converts a phonetic word back to a number

<a name="PatternEncoder.Encode"></a>
### func \(\*PatternEncoder\) [Encode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L152>)

```go
func (e *PatternEncoder) Encode(number PositiveInt) (string, error)
```

Encode converts a number to a phonetic word

<a name="PatternEncoder.MaxValue"></a>
### func \(\*PatternEncoder\) [MaxValue](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L212>)

```go
func (e *PatternEncoder) MaxValue() int
```

MaxValue returns the maximum number that can be encoded

<a name="PhoneticEncoder"></a>
## type [PhoneticEncoder](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L9-L12>)

PhoneticEncoder handles encoding/decoding between numbers and phonetic words

```go
type PhoneticEncoder struct {
    // contains filtered or unexported fields
}
```

<a name="NewPhoneticEncoder"></a>
### func [NewPhoneticEncoder](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L30>)

```go
func NewPhoneticEncoder(config *PhonidConfig) (*PhoneticEncoder, error)
```

NewPhoneticEncoder creates an encoder with a validated config

<a name="PhoneticEncoder.Decode"></a>
### func \(\*PhoneticEncoder\) [Decode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L138>)

```go
func (e *PhoneticEncoder) Decode(word string) (int, error)
```



<a name="PhoneticEncoder.Encode"></a>
### func \(\*PhoneticEncoder\) [Encode](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L121>)

```go
func (e *PhoneticEncoder) Encode(number PositiveInt) (string, error)
```

Encode converts a number to a phonetic word, automatically selecting the best pattern

<a name="PhoneticEncoder.ValidatePreflight"></a>
### func \(\*PhoneticEncoder\) [ValidatePreflight](<https://github.com/iilei/phonid/blob/master/pkg/preflight.go#L7>)

```go
func (p *PhoneticEncoder) ValidatePreflight(checks []PreflightCheck) error
```

ValidatePreflight checks if preflight tests pass for this encoder Performs bidirectional validation: encoding \(int\-\>string\) and decoding \(string\-\>int\)

<a name="PhonidConfig"></a>
## type [PhonidConfig](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L123-L126>)

PhonidConfig holds phonetic pattern configuration.

Custom categories \(X, Y, Z\) can be used for domain\-specific sounds:

```
config := PhonidConfig{
    Patterns: []string{"CXVC"},  // Mix custom with built-in
    Placeholders: PlaceholderMap{
        Consonant: RuneSet("bcd"),
        Vowel: RuneSet("ae"),
        CustomX: RuneSet("Å‹"),  // Velar nasal
    },
}
```

```go
type PhonidConfig struct {
    Patterns     []string       // e.g., "CVCVC", "CLVCV", "VCCVL" // Each character becomes a placeholder key
    Placeholders PlaceholderMap // Maps placeholder to character set, e.g., {"C": "bcdfg", "V": "aeiou"}
}
```

<a name="PhonidConfig.Validate"></a>
### func \(\*PhonidConfig\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L226>)

```go
func (pc *PhonidConfig) Validate() error
```

Validate checks if the phonetic config is valid

<a name="PlaceholderMap"></a>
## type [PlaceholderMap](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L29>)



```go
type PlaceholderMap map[PlaceholderType]RuneSet
```

<a name="PlaceholderType"></a>
## type [PlaceholderType](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L28>)

PlaceholderType represents a valid phonetic placeholder identifier

```go
type PlaceholderType rune
```

<a name="Consonant"></a>Valid placeholder types

```go
const (
    Consonant PlaceholderType = 'C'
    Vowel     PlaceholderType = 'V'
    Liquid    PlaceholderType = 'L'
    Nasal     PlaceholderType = 'N'
    Sibilant  PlaceholderType = 'S'
    Fricative PlaceholderType = 'F'
    CustomX   PlaceholderType = 'X'
    CustomY   PlaceholderType = 'Y'
    CustomZ   PlaceholderType = 'Z'
)
```

<a name="Position"></a>
## type [Position](<https://github.com/iilei/phonid/blob/master/pkg/encode.go#L23-L27>)

Position represents one character position in the pattern

```go
type Position struct {
    // contains filtered or unexported fields
}
```

<a name="PositiveInt"></a>
## type [PositiveInt](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L12>)

PositiveInt represents a non\-negative integer

```go
type PositiveInt int
```

<a name="PositiveInt.Validate"></a>
### func \(PositiveInt\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L14>)

```go
func (p PositiveInt) Validate() error
```



<a name="PreflightCheck"></a>
## type [PreflightCheck](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L30-L33>)

PreflightCheck represents a single input\-\>output verification

```go
type PreflightCheck struct {
    Input  PositiveInt `toml:"input"`
    Output string      `toml:"output"`
}
```

<a name="RuneSet"></a>
## type [RuneSet](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L59>)

RuneSet is a slice of runes that can be unmarshaled from a string. This allows TOML configs to use simple strings like C = "bcdfg" instead of arrays.

```go
type RuneSet []rune
```

<a name="RuneSet.UnmarshalText"></a>
### func \(\*RuneSet\) [UnmarshalText](<https://github.com/iilei/phonid/blob/master/pkg/phonid.go#L62>)

```go
func (rs *RuneSet) UnmarshalText(text []byte) error
```

UnmarshalText implements encoding.TextUnmarshaler for TOML/JSON unmarshaling.

<a name="ShuffleConfig"></a>
## type [ShuffleConfig](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L10-L14>)

ShuffleConfig holds Feistel shuffler configuration

```go
type ShuffleConfig struct {
    BitWidth int    `default:"32"`
    Rounds   int    `default:"4"`
    Seed     uint64 `default:"0"`
}
```

<a name="ShuffleConfig.Validate"></a>
### func \(\*ShuffleConfig\) [Validate](<https://github.com/iilei/phonid/blob/master/pkg/shuffle.go#L17>)

```go
func (sc *ShuffleConfig) Validate() error
```

Validate checks if the shuffle config is valid

<a name="TOMLConfig"></a>
## type [TOMLConfig](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L22-L27>)

TOMLConfig represents the top\-level TOML structure

```go
type TOMLConfig struct {
    Base      PositiveInt       `toml:"base,omitempty"`
    Shuffle   TOMLShuffleConfig `toml:"shuffle,omitempty"`
    Phonetic  TOMLPhonidConfig  `toml:"phonetic,omitempty"`
    Preflight []PreflightCheck  `toml:"preflight"` // Required - no omitempty
}
```

<a name="TOMLPhonidConfig"></a>
## type [TOMLPhonidConfig](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L43-L46>)

TOMLPhonidConfig represents the phonetic configuration

```go
type TOMLPhonidConfig struct {
    Patterns     []string          `toml:"patterns,omitempty"`
    Placeholders map[string]string `toml:"placeholders,omitempty"`
}
```

<a name="TOMLShuffleConfig"></a>
## type [TOMLShuffleConfig](<https://github.com/iilei/phonid/blob/master/pkg/rcparse.go#L36-L40>)

TOMLShuffleConfig represents shuffle configuration

```go
type TOMLShuffleConfig struct {
    BitWidth PositiveInt `toml:"bit_width,omitempty"`
    Rounds   PositiveInt `toml:"rounds,omitempty"`
    Seed     PositiveInt `toml:"seed,omitempty"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
